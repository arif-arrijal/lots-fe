<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" >
<div th:fragment="result-table">
    <input type="hidden" id="success-msg-picking" th:value="${successMsg}" />
    <div class="box box-primary animated fadeInUp">
        <div class="box-header with-border">
            <h3 style="color: #3c8dbc" class="box-title">AWB Number <span th:text="${result.getAwb()}"/> </h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Minimize"><i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Close"><i class="fa fa-times"></i></button>
            </div>
        </div>
        <div class="box-body table-responsive">
            <table id="result-table" class="table table-bordered" style="text-align:center">
                <thead style="background-color: #3c8dbc; color: white">
                    <tr>
                        <th style="text-align: center">Flight Number</th>
                        <th style="text-align: center">Flight Date</th>
                        <th style="text-align: center">STD</th>
                        <th style="text-align: center">AWB</th>
                        <th style="text-align: center">Status</th>
                        <th style="text-align: center">Destination</th>
                        <th style="text-align: center">Piece(s)</th>
                        <th style="text-align: center">ULD/BT</th>
                        <th style="text-align: center">Acceptance</th>
                        <th style="text-align: center">Storage Location</th>
                        <th style="text-align: center">Build Up</th>
                        <th style="text-align: center">Ramp Pickup</th>
                        <th style="text-align: center">Bay Dropoff</th>
                        <th style="text-align: center">Load</th>
                        <th style="text-align: center">Offload</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="res : ${result}">
                    <td style="text-align: center" th:text="${res.getFlightNo() != null } ? ${res.getFlightNo()} : 'N/A'"></td>
                    <td style="text-align: center" th:text="${res.getFlightDate() != null} ? ${res.getFlightDate()} : 'N/A'"></td>
                    <td style="text-align: center" th:text="${res.getStd() != null} ? ${res.getStd()} : 'N/A'"></td>
                    <td style="text-align: center"><a style="font-weight: bold" href="#"  th:onclick="'javascript:getAwbDetail(\'' + ${res.getAwb()} + '\')'"  data-toggle="tooltip" th:title="'Detail for AWB Number ' + ${res.getAwb()}" th:text="${res.getAwb()}"></a></td>
                    <td style="text-align: center" th:text="${res.getStatus()} ? ${res.getStatus()} : 'N/A'"></td>
                    <td style="text-align: center" th:text="${res.getDestination()} ? ${res.getDestination()} : 'N/A'"></td>
                    <td style="text-align: center" ><span class="label label-success" th:text="${res.getTagQty() != null} ? ${res.getTagQty()} : 'N/A'"></span></td>
                    <td style="text-align: center" th:text="${res.getUld() != null} ? ${res.getUld()} : 'N/A'"></td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getAcceptance()}" class="label label-success" th:text="${res.getAcceptance()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getAcceptance()}" th:class="${res.getAcceptance() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getAcceptance()}" data-toggle="tooltip" th:title="${res.getAcceptance() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getStorage()}" class="label label-success" th:text="${res.getStorage()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getStorage()}" th:class="${res.getStorage() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getStorage()}" data-toggle="tooltip" th:title="${res.getStorage() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getBuildUp()}" class="label label-success" th:text="${res.getBuildUp()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getBuildUp()}" th:class="${res.getBuildUp() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getBuildUp()}" data-toggle="tooltip" th:title="${res.getBuildUp() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getRamPickup()}" class="label label-success"  th:text="${res.getRamPickup()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getRamPickup()}" th:class="${res.getRamPickup() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getRamPickup()}" data-toggle="tooltip" th:title="${res.getRamPickup() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getBayDropOff()}" class="label label-success" th:text="${res.getBayDropOff()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getBayDropOff()}" th:class="${res.getBayDropOff() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getBayDropOff()}" data-toggle="tooltip" th:title="${res.getBayDropOff() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getLoad()}" class="label label-success" th:text="${res.getLoad()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getLoad()}" th:class="${res.getLoad() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getLoad()}" data-toggle="tooltip" th:title="${res.getLoad() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                    <td style="text-align: center">
                        <span th:if="${res.getTagQty() == res.getOffload()}" class="label label-success" th:text="${res.getOffload()}" data-toggle="tooltip" th:title="#{data.match.with.awb}"></span>
                        <span th:if="${res.getTagQty() != res.getOffload()}" th:class="${res.getOffload() > 0} ? 'label label-danger' : 'label label-default'" th:text="${res.getOffload()}" data-toggle="tooltip" th:title="${res.getOffload() > 0} ? #{data.not.match.with.awb} : #{data.not.validated.with.awb}"></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<th:block layout:fragment="js-addition">
    <script th:inline="javascript">
        /*<![CDATA[*/
        $(document).ready(function () {
            $('#result-table').DataTable({
                "ordering": false,
                "pageLength": 10,
                "autoWidth": true
            });
        });

        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "100",
            "hideDuration": "300",
            "timeOut": "1500",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
        var awb = $('#search-keyword').val();
        toastr.success("Successfully retrieve AWB Number " + awb + " data");

        /*]]>*/
    </script>
</th:block>
</html>