<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<div th:fragment="cargo-table">
    <div class="box box-success animated fadeInUp">
        <div class="box-header with-border">
            <h3 style="color: #00a65a" class="box-title">Cargo List for AWB Number <span th:text="${awb}"></span></h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Minimize"><i class="fa fa-minus"></i></button>
                <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Close"><i class="fa fa-times"></i></button>
            </div>
        </div>
        <div class="box-body">
            <div class="col-md-12">
                <table id="cargo-table" class="table table-striped table-bordered table-hover table-responsive" style="text-align:center">
                    <thead style="background-color: #3c8dbc; color: white">
                    <tr>
                        <th style="text-align: center">Tag</th>
                        <th style="text-align: center">EPC Code</th>
                        <th style="text-align: center">Piece(s)</th>
                        <th style="text-align: center">Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="res : ${result}">
                        <td style="text-align: center" th:text="${res.getTag()}"></td>
                        <td style="text-align: center"><a style="font-weight: bold" href="#"  th:onclick="'javascript:getCargoDetail(\'' + ${res.getId()} + '\')'" th:text="${res.getEpc() != null} ? ${res.getEpc()} : 'N/A'" data-toggle="modal" title="Get cargo detail"></a></td>
                        <td style="text-align: center" th:text="${res.getPcs()}"></td>
                        <td style="text-align: center" th:text="${res.getStatus()}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<th:block layout:fragment="js-addition">
    <script th:inline="javascript">
        /*<![CDATA[*/
        $(document).ready(function () {
            $('#cargo-table').DataTable({
                "ordering": true,
                "pageLength": 10,
                "autoWidth": true
            });
        });

        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "100",
            "hideDuration": "300",
            "timeOut": "1500",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
        var awb = $('#search-keyword').val();
        toastr.success("Successfully retrieve Cargo list for AWB number " + awb);

        /*]]>*/
    </script>
</th:block>
</html>